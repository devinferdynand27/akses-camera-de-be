<!DOCTYPE html>
<html>
<head>
    <title>Akses Kamera</title>
</head>
<body>
    <h1>Mengakses Kamera</h1>
    <button  onclick="bukacamera()">Buka Kamera</button>
    <button id="cameraFront">Kamera Depan</button>
    <button id="cameraBack">Kamera Belakang</button>
    <button id="takeScreenshot">Screenshot</button>
    <video id="videoElement" autoplay style="transform: scaleX(-1); width: 90%; height: 100%;"></video>
    <img id="screenshotImage" style="display: none;">

    <script>
        const videoElement = document.getElementById("videoElement");
        const takeScreenshotButton = document.getElementById("takeScreenshot");
        const screenshotImage = document.getElementById("screenshotImage");

        function bukacamera(){
            accessCamera("user");
        }

        function accessCamera(facingMode) {
            const constraints = {
                video: { facingMode: facingMode }
            };
            const stream = videoElement.srcObject;

            if (stream) {
                const tracks = stream.getTracks();
                tracks.forEach(track => track.stop());
            }

            navigator.mediaDevices.getUserMedia(constraints)
                .then(function (stream) {
                    videoElement.srcObject = stream;
                })
                .catch(function (error) {
                    console.error("Gagal mengakses kamera:", error);
                });
        }

        takeScreenshotButton.addEventListener("click", function () {
            takeScreenshot();
        });

        function takeScreenshot() {
            const canvas = document.createElement("canvas");
            canvas.width = videoElement.videoWidth;
            canvas.height = videoElement.videoHeight;
            const ctx = canvas.getContext("2d");

            ctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);

            // Mengambil gambar dalam format base64
            const screenshotBase64 = canvas.toDataURL("image/png");

            // Menampilkan gambar dengan elemen img
            screenshotImage.src = screenshotBase64;
            screenshotImage.style.display = "block"; // Menampilkan elemen img

            // Anda juga dapat menyimpan gambar ini atau melakukan tindakan lain sesuai kebutuhan.
        }

        document.getElementById("cameraFront").addEventListener("click", function () {
            accessCamera("user");
        });
        document.getElementById("cameraBack").addEventListener("click", function () {
            accessCamera("environment");
        });
    </script>
</body>
</html>
